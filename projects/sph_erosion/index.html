<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> SPH Erosion | Laurent Voisard </title> <meta name="author" content="Laurent Voisard"> <meta name="description" content="A hydraulic erosion simulation using SPH for water (2022)"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/voisardl.jpeg?bf5824968d77db630b9388fc543ad4f4"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://lvoisard.github.io/projects/sph_erosion/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Laurent Voisard </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">SPH Erosion</h1> <p class="post-description">A hydraulic erosion simulation using SPH for water (2022)</p> </header> <article> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/sph/thumbnail-480.webp 480w,/assets/img/sph/thumbnail-800.webp 800w,/assets/img/sph/thumbnail-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/sph/thumbnail.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>As one of the deliverables for this my computer animations (COMP 477) final project, we had to make a html report of the projet, I will let it speak for Itself.</p> <p>I implemented GPU instancing for the spheres, a spatial-hash grid for the neighbouring search, the SPH algorithm and integrating it with the sediment transport, and the random terrain generation.</p> <h3 id="project-goal">PROJECT GOAL</h3> <p>For our final project, we aimed to deliver an OpenGL application that could simulate fluid dynamics and its erosion effects on terrain in real-time. The project was too ambitious and we were not able to implement all parts we wanted, but we believe that the results are still respectable.</p> <hr> <h3 id="evolution-of-results">EVOLUTION OF RESULTS</h3> <p>As it happens gradually, erosion and sediment deposition can be difficult to notice. The videos below here are sped up as to better showcase them. Such changes to the terrain can be made more obvious by quickly scrubbing through the video using the timeline bar. We also recommend viewing the videos in fullscreen to that effect.</p> <p>The amount of sediment contained within each SPH particle is indicated by its color turning from blue to orange. Some particles are randomly chosen to start with some sediment</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <video class="img-fluid rounded z-depth-1" controls="" autoplay="" muted="" loop=""> <source src="/assets/img/sph/02_1.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> </div> <div class="col-sm mt-3 mt-md-0"> <video class="img-fluid rounded z-depth-1" controls="" autoplay="" muted="" loop=""> <source src="/assets/img/sph/02_2.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> </div> </div> <p>Erosion along the slope leading to noticeable sediment deposition at the bottom.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <video class="img-fluid rounded z-depth-1" controls="" autoplay="" muted="" loop=""> <source src="/assets/img/sph/03_1.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> </div> <div class="col-sm mt-3 mt-md-0"> <video class="img-fluid rounded z-depth-1" controls="" autoplay="" muted="" loop=""> <source src="/assets/img/sph/03_2.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> </div> </div> <p>Pooling results in fluid gradually depositing eroded sediment.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <video class="img-fluid rounded z-depth-1" controls="" autoplay="" muted="" loop=""> <source src="/assets/img/sph/04.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> </div> </div> <p>Longer slope leads to more sediment accumulation in the fluid, resulting in larger deposition.</p> <h4 id="surface-normal-calculations">Surface Normal Calculations</h4> <p>During development, we noticed that there were inaccuracies in the behavior of the SPH fluid, especially so near the borders of the terrain. This turned out to be the caused by the way we computed surface normals from the terrain. The videos below showcase the fluid behavior prior to demonstrate improvements made in this regard.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <video class="img-fluid rounded z-depth-1" controls="" autoplay="" muted="" loop=""> <source src="/assets/img/sph/01_2.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> </div> </div> <p>The fluid flows less naturally, and seems to “stick” to the cliffside. Erosion occurs as it should regardless.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <video class="img-fluid rounded z-depth-1" controls="" autoplay="" muted="" loop=""> <source src="/assets/img/sph/00.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> </div> </div> <p>An extreme example where the fluid in the border cells would climb uphill.</p> <hr> <h3 id="reflection">REFLECTION</h3> <p>As stated above, the project was too ambitious for a team of 2. We did not have time to implement proper fluid sources or paint brushes to edit terrain in real-time.</p> <p>Despite this, the SPH simulation paired with the erosion model can still demonstrate nice and, altough exaggerated for demonstration purposes, believeable-looking erosion. The project exists as a nice proof of concept that could be expanded later if desired.</p> <h3 id="dependencies">DEPENDENCIES</h3> <p>This project was created using OpenGL3 with ImGUI and stb image libraries.</p> </article> <h2>References</h2> <div class="publications"> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Laurent Voisard. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?c15de51d4bb57887caa2c21988d97279"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y88M099M11"></script> <script defer src="/assets/js/google-analytics-setup.js"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>